<script type="text/javascript">

    RED.nodes.registerType('k8s-pods', {
        category: 'k8s',
        defaults: {
            kubeconfig: {
                value: "",
                type: "k8s-config",
                required: false
            },
            context: {},
            contextType: {},
            action: {},
            actionType: {},
            namespace: {},
            namespaceType: {},
            body: {},
            bodyType: {}
        },
        inputs: 1,
        outputs: 1,
        color: '#FFFFFF',
        label: function () {
            if (this.name) {
                return this.name;
            } else if (this.confignode.name) {
                return this.confignode.name;
            }

            return 'pods';
        },
        icon: "kubernetes_logo_40x60.png",
        paletteLabel: 'pods',
        oneditprepare: function () {
            const node = this;

            $("#node-input-namespace").typedInput({
                typeField: "#node-input-namespaceType",
                types: ["str", "msg"]
            });
            $("#node-input-body").typedInput({
                typeField: "#node-input-bodyType",
                types: ["json", "msg"]
            });

            $("#node-input-context").typedInput({
                typeField: "#node-input-contextType",
                types: ["str", "msg","env"]
            });

            $("#node-input-action").typedInput({
                typeField: "#node-input-actiontype",
                default: "action",
                types: ["str", "msg", {
                    value: "action",
                    options: [                       
                        { value: "create", label: "create" },
                        { value: "delete", label: "delete" },
                        { value: "list", label: "list" }
                    ]
                }]
            });
        }
    })
</script>

<script type="text/html" data-template-name="k8s-pods">
    <style>
        .event {
            display: flex;
        }
    
        .event .red-ui-typedInput-container {
            flex: 1
        }
    
        .event span {
            flex: 1
        }
    
        .event label {
            min-width: 140px;
            align-self: center;
        }
    
        .padding-top {
            padding-top: 10px;
        }
    </style>
    
    <div class="form-row event">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>Name</span></label>
        <input type="text" id="node-input-name">
    </div>
    <hr />
    <h3>Config</h3>
    <div class="form-row event">
        <label for="node-input-kubeconfig"><i class="fa fa-globe"></i> <span>config</span></label>
        <input type="hidden" id="node-input-kubeconfig">
    </div>    
    <div class="form-row event">
        <label for="node-input-body"><i class="fa fa-globe"></i> <span>body</span></label>
        <input type="text" id="node-input-body">
        <input type="hidden" id="node-input-bodyType">
    </div>    
    <div class="form-row event">
        <label for="node-input-namespace"><i class="fa fa-globe"></i> <span>namespace</span></label>
        <input type="text" id="node-input-namespace">
        <input type="hidden" id="node-input-namespaceType">
    </div>    
    <div class="form-row event">
        <label for="node-input-context"><i class="fa fa-globe"></i> <span>context</span></label>
        <input type="text" id="node-input-context">
        <input type="hidden" id="node-input-contextType">
    </div>   
    <div class="form-row event">
        <label for="node-input-action"><i class="fa fa-globe"></i> <span>action</span></label>
        <input type="text" id="node-input-action">
        <input type="hidden" id="node-input-actionType">
    </div>   
</script>

<script type="text/html" data-help-name="k8s-secrets">

</script>